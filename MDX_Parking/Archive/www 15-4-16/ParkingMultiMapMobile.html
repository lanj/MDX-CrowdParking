<!DOCTYPE html>
<html>
	<head>
	<meta charset ="utf-8"/>
	<!-- display size and width based on mobile device width and height using viewport tag -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
	<!--  refer to main.css to adjust layout and styling -->
    <link rel="stylesheet" type="text/css" href="css/main.css" />
	<title> MDX Parking</title>
	
	<!-- call jquery library for css styling -->
    <script type="text/javascript" src="js/jquery-1.7.1/jquery.min.js"></script>
    
     <script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.4.5.min.js"></script>
     

			<script >
	
	        /**
	          * declare global variables for taking map, LatLng , infoWindow , array of Street and  array of Marker
	          */

			var map ;
			
			var parkLatLng ;
			
		    var info;
			
			var streets = [];
			
			var marker = [];
			
			
			
			/**		
			  * initiate Map using google.maps.Map and mapOptions
    		  * @param none;
			  **/
			
		  	  function initMap() {
				
				
			  /***
				*
				*apply maptype and setup map coordinates 
				*@constructor map;
				*@param Div;
				*@param MapOption;
				**/
			  var mapOptions = {
						zoom: 15 ,
						center: {lat: 51.5898860, lng: -0.2269573 }, mapTypeId: google.maps.MapTypeId.ROADMAP
					};
					
			  	  	map = new google.maps.Map(document.getElementById('map'), mapOptions);
				

					        var script = document.createElement('script');
							
							/**
							  *  get GeoJson script with parking details for location.
							  *  
							  */
					        script.src = 'parkingMDX_GeoJSONP.js';
					        document.getElementsByTagName('head')[0].appendChild(script);
							

							
						
			}
			
			/**
			  *  callback function, runs a loop and 
			  *  set coordinates lat and longitude
			  *  to each marker
			  *  use {@link maps#LatLng} to set the  marker coordinates 
              *  use {@link maps.Marker} to create marker for each coordinate
			  *  use {@link marker.setMap} to set marker 
			  *  @param {results} returned results from GEOJSON class
			  *
			  */
			
	        window.eqfeed_callback = function(results) {
			
	          for (var i = 0; i < results.features.length; i++) {
			  
	            var coords = results.features[i].geometry.coordinates;
				var streets = results.features[i].properties.street;

	            parkLatLng = new google.maps.LatLng(coords[1],coords[0]);
				
	            var marker = new google.maps.Marker({

				  position: parkLatLng,
				  map: map
				
				 })
				 
				 marker.setMap(map);
				 addListenerMarker(marker , streets , map );


			    
	          }
			  
		  }
		  
			    /**
		          *   function addListener listens for click event 
		   		  *   and calls the InfoWindow function to get parking details
		          *   @param {Marker}
		          *   @param {Street}
		          *   @param {map }
		          */
		
		  		function addListenerMarker(aMarker, aStreet , map ){
			    
					
						//marker.setLabel(streets);
						var info = new google.maps.InfoWindow({
								content: "" + aStreet  
								
						});
					
				  google.maps.event.addListener(aMarker, 'click', function(event) {	

				
						info.open(map, aMarker);
						
						
				   });
				  
				}

        

		
			google.maps.event.addDomListener(window, 'load', initMap);
		
			</script>

  </head>
  
  
 <body>

	<header>
		<div id="logo">
 		</div>
	</header> 

    <!-- container for mobile app -->
	<div id="container"> 
		<nav>
			<!-- set up top menu   -->
			<ul id="menu">
				<li class="menu"><a> Home  </a> </li>
				<li class="menu"><a> Support </a> </li>	
				<li class="menu"><a> Exit </a> </li>			
			</ul>
	  	<nav> 
	
    	<section id="breadcrumb"><h2 align="center">  </h2></section>
		</br>
		
  		<div id="map"> </div>
	<!--   call google api for maps   -->	
	<script src="https://maps.googleapis.com/maps/api/js?callback=initMap" async defer>
	</script>
	
	<!--  adds the command and navigation buttons for the mobile app -->
	
    <footer>
    	<ul id="menu" class="Floor"> 
		<form>		
    	 <li class="menuFloor shadow"><a> Previous  </a> </li>
		
    	 <li class="menuFloor shadow"><button type="button" disabled>Update </button></li>	
		<li class="menuFloor shadow"><button type="button" disabled>Report </button></li>
		
   		<li class="menuFloor shadow"><a> Next </a> </li>	
		</form>			
    </ul>
	  
     </footer>
</div>

  </body>
  
</html>